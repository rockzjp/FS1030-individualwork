{"ast":null,"code":"var _jsxFileName = \"/Users/jianpingzuo/Desktop/xifanfs1030/\\u4EE3\\u7801/src/components/Login/Login.js\";\nimport React from 'react';\nimport $ from 'jquery';\nimport './Login.scss';\nimport InputField from './inputField';\n\nfunction Login() {\n  const inputRefs = React.useRef([React.createRef(), React.createRef()]);\n  const [data, setData] = React.useState({});\n\n  const handleChange = (name, value) => {\n    setData(prev => ({ ...prev,\n      [name]: value\n    }));\n  };\n\n  const submitForm = e => {\n    e.preventDefault();\n    let isValid = true;\n\n    for (let i = 0; i < inputRefs.current.length; i++) {\n      const valid = inputRefs.current[i].current.validate();\n\n      if (!valid) {\n        isValid = false;\n      }\n    }\n\n    if (!isValid) {\n      return;\n    }\n\n    console.log(':data', data);\n    $.ajax({\n      type: \"post\",\n      url: \"http://localhost:3001/login\",\n      dataType: \"json\",\n      contentType: \"application/json\",\n      data: JSON.stringify(data),\n      success: function (res) {\n        if (res.returnCode === 0) {\n          console.log(res.token);\n          window.location = '/admin';\n        } else {\n          alert(res.returnMsg);\n        }\n      },\n      error: function (err) {\n        alert(err);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logintype\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitForm,\n    className: \"forml\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InputField, {\n    ref: inputRefs.current[0],\n    name: \"email\",\n    label: \"Email* :\",\n    onChange: handleChange,\n    validation: \"required|min:6|max:15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(InputField, {\n    ref: inputRefs.current[1],\n    name: \"password\",\n    label: \"Password*  :\",\n    onChange: handleChange,\n    validation: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"lbutton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 10\n    }\n  }, \"Login\")));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/jianpingzuo/Desktop/xifanfs1030/代码/src/components/Login/Login.js"],"names":["React","$","InputField","Login","inputRefs","useRef","createRef","data","setData","useState","handleChange","name","value","prev","submitForm","e","preventDefault","isValid","i","current","length","valid","validate","console","log","ajax","type","url","dataType","contentType","JSON","stringify","success","res","returnCode","token","window","location","alert","returnMsg","error","err"],"mappings":"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","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\nimport './Login.scss';\nimport InputField from './inputField';\n\n\nfunction Login() {\n  const inputRefs = React.useRef(\n   [React.createRef(), React.createRef()]\n  );\n\n  const [data, setData] = React.useState({});\n\n  const handleChange = (name, value) =>{\n     setData(prev => ({...prev, [name]: value}))\n  }\n\n\n  const submitForm = (e) => {\n       e.preventDefault();\n\n\n       let isValid = true;\n\n       for (let i=0; i<inputRefs.current.length; i++){\n         const valid = inputRefs.current[i].current.validate()\n\n         if(!valid){\n           isValid = false\n           \n         }\n       }\n       if(!isValid){\n         return\n       }\n      console.log(':data',data);\n\n      $.ajax({\n        type: \"post\",\n        url: \"http://localhost:3001/login\" ,\n        dataType : \"json\",\n        contentType : \"application/json\", \n        data: JSON.stringify(data),\n        success: function (res) {\n          if(res.returnCode === 0)\n          {\n              console.log(res.token)\n              window.location = '/admin'\n          }\n          else\n          {\n              alert(res.returnMsg)\n          }\n        },\n        error:function(err)\n        {\n          alert(err);\n        }\n      }) \n  }\n  return (\n    \n    <div className=\"logintype\">\n      <form onSubmit={submitForm} className=\"forml\">\n         <InputField \n           ref = {inputRefs.current[0]}\n           name=\"email\"\n           label=\"Email* :\"\n           onChange={handleChange}\n           validation={\"required|min:6|max:15\"}\n         />\n\n\n          <InputField \n          ref = {inputRefs.current[1]}\n           name=\"password\"\n           label=\"Password*  :\"\n           onChange={handleChange}\n           validation={\"required\"}\n         /> \n\n         <button type=\"submit\" className=\"lbutton\">Login</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}